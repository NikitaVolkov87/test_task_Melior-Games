<div class="full-width-container">

  <div class="row">

    <div class="col-xs-4">
      <form>

        <h3 class="mb-4">Search</h3>

        <div class="form-group row">

          <label for="author" class="col-sm-3 col-form-label">Author</label>
          <div class="col-sm-7">
            <input class="form-control" id="author" name="author" [(ngModel)]="searchBook.author" (ngModelChange)="filterBooks()" #author="ngModel" pattern="[^0-9]*">

            <div *ngIf="author.invalid && (author.dirty || author.touched)" class="alert alert-danger">
              <div *ngIf="author.errors.pattern">
                Digits are not allowed.
              </div>
            </div>

          </div>

        </div>

        <div class="form-group row">

          <label for="title" class="col-sm-3 col-form-label">Title</label>
          <div class="col-sm-7">
            <input class="form-control" id="title" name="title" [(ngModel)]="searchBook.title" (ngModelChange)="filterBooks()">
          </div>

        </div>

        <div class="form-group row">

          <label for="isbn" class="col-sm-3 col-form-label">ISBN</label>
          <div class="col-sm-7">
            <input class="form-control" id="isbn" name="isbn" [(ngModel)]="searchBook.isbn" (ngModelChange)="filterBooks()" #isbn="ngModel" pattern="[0-9]*">

            <div *ngIf="isbn.invalid && (isbn.dirty || isbn.touched)" class="alert alert-danger">
              <div *ngIf="isbn.errors.pattern">
                Only digits are allowed.
              </div>
            </div>

          </div>

        </div>

        <div class="form-group row">
          <label for="format" class="col-sm-3 col-form-label">Format</label>
          <div class="col-sm-7">
            <select class="form-control" id="format" name="format" [(ngModel)]="searchBook.formatId" (ngModelChange)="filterBooks()">
              <option></option>
              <option *ngFor="let format of dataLists.formats" [ngValue]="format.id">{{format.name}}</option>
              <!-- <option>All</option>
              <option>Paperback</option>
              <option>Hardcover</option>
              <option>Audiobook</option>
              <option>Leather Bound</option>
              <option>Spiral Bound</option> -->
            </select>
          </div>
        </div>

        <div class="form-group row">

          <div class="col">
            <div class="row">

              <label for="page-min" class="col-sm-6 col-form-label">Pages between</label>
              <div class="col-sm-6">
                <input class="form-control" id="page-min" name="pages-min" [(ngModel)]="searchBook.pagesMin" (ngModelChange)="filterBooks()" #pagesMin="ngModel" pattern="[0-9]*">

                <div *ngIf="pagesMin.invalid && (pagesMin.dirty || pagesMin.touched)" class="alert alert-danger">
                  <div *ngIf="pagesMin.errors.pattern">
                    Only digits are allowed.
                  </div>
                </div>

              </div>

            </div>
          </div>

          <div class="col">
            <div class="row">

              <label  class="col-sm-2 col-form-label text-center" for="page-max">and</label>
              <div class="col-sm-6">
                <input class="form-control" id="page-max" name="pages-max" [(ngModel)]="searchBook.pagesMax" (ngModelChange)="filterBooks()" #pagesMax="ngModel" pattern="[0-9]*">

                <div *ngIf="pagesMax.invalid && (pagesMax.dirty || pagesMax.touched)" class="alert alert-danger">
                  <div *ngIf="pagesMax.errors.pattern">
                    Only digits are allowed.
                  </div>
                </div>

              </div>

            </div>
          </div>

        </div>

        <div class="form-group row">

          <div class="col">
            <div class="row">

              <label for="price-min" class="col-sm-6 col-form-label">Price between</label>
              <div class="col-sm-6">
                <input class="form-control" id="price-min" name="price-min" [(ngModel)]="searchBook.priceMin" (ngModelChange)="filterBooks()" #priceMin="ngModel" pattern="[0-9]*">

                <div *ngIf="priceMin.invalid && (priceMin.dirty || priceMin.touched)" class="alert alert-danger">
                  <div *ngIf="priceMin.errors.pattern">
                    Only digits are allowed.
                  </div>
                </div>

              </div>

            </div>
          </div>

          <div class="col">
            <div class="row">

              <label  class="col-sm-2 col-form-label text-center" for="price-max">and</label>
              <div class="col-sm-6">
                <input class="form-control" id="price-max" name="price-max" [(ngModel)]="searchBook.priceMax" (ngModelChange)="filterBooks()" #priceMax="ngModel" pattern="[0-9]*">

                <div *ngIf="priceMax.invalid && (priceMax.dirty || priceMax.touched)" class="alert alert-danger">
                  <div *ngIf="priceMax.errors.pattern">
                    Only digits are allowed.
                  </div>
                </div>

              </div>

            </div>
          </div>

        </div>

      </form>
    </div>

    <div class="col-xs-8">
      <h3 class="mb-4">List of Matched Books</h3>

      <div class="books__container" *ngIf="foundBooks.length">
        <div class="books__row books__row_table_header">
          <div class="books__col books__col_table_header_n">
            <p class="table_header_text">#</p>
          </div>
          <div class="books__col books__col_table_header_info">
            <p class="table_header_text">book</p>
          </div>
          <div class="books__col books__col_table_header_price">
            <p class="table_header_text">price</p>
          </div>
        </div>
        <div class="books__row books__row_table_item" *ngFor="let book of foundBooks">
          <a href="" routerLink="/book/{{book.id}}">
            <div class="books__col books__col_table_item_n">
              <p class="table_item_text">{{book.id}}</p>
            </div>
            <div class="books__col books__col_table_item_info">
              <p class="table_item_text"><span class="books_author_text">{{book.author}}</span> - <span class="books_title_text">{{book.title}}</span> <span class="books_pages_text">({{book.pages}} pages)</span></p>
            </div>
            <div class="books__col books__col_table_item_price">
              <p class="table_item_text">{{book.price}}</p>
            </div>
          </a>
        </div>
      </div>

    </div>

  </div>

</div>
